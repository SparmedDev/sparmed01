{% extends 'base.html' %}

{% load static from staticfiles %}
{% load bootstrap3 %}
{% load compress %}
{% load cache %}

{% block pagedescription %}Browse the finest quality IVF Laboratory equipment{% endblock %}
{% block title %}Products{% endblock %}

{% block head %}
<!-- Important Owl stylesheet -->
<link rel="stylesheet" href="{% static 'owl-carousel/css/owl.carousel.css' %}">

<!-- Default Theme -->
<link rel="stylesheet" href="{% static 'owl-carousel/css/owl.theme.css' %}">
{% endblock %}

{% block body %}

{% cache 3600 products-details-nav-and-info product.slug %}
<ol class="breadcrumb">
  <li><a href="{{ category.get_absolute_url }}">{{ category.name }}</a></li>
  <li class="active">{{ product.subcategory }}</li>
</ol>

<h2 class="text-center">{{ product.name }}</h2>
<p class="text-center"><strong>Product ID: {{ product.product_id }}</strong></p>
{% if product.description %}<p class="text-center"><em>{{ product.description }}</em></p>{% endif %}
{% endcache %}

{% if user.is_anonymous %}
<p class="text-muted text-center">Add to Cart <span class="glyphicon glyphicon-shopping-cart"></span> (login required)</p>
{% else %}
<p class="text-center"><a href="{% url 'add-to-cart' category.slug product.id %}">Add to Cart <span class="glyphicon glyphicon-shopping-cart"></span></a></p>
{% endif %}

{% cache 3600 products-details-images product.slug %}
<span class="minor-skip"></span>

<div class="row">
  <div class="col-md-6">
    {% if images %}
    <div class="owl-carousel">
      {% for image in images reversed %}
      <div>
        <img class="img-responsive img-rounded center-block" data-src="{{ image.get_absolute_url }}" src="{{ image.get_absolute_url }}" alt="{{ image.image_title }}" class="lazyOwl">
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-warning">No pictures available</div>
    {% endif %}
  </div>
  
  <div class="col-md-6">
      {{ product.subcategory.long_text|safe }}
  </div>
  
</div>

{% endcache %} 
       

{% endblock %}

{% block endbody %}

{% cache 3600 products-details-scripts %}
<!-- Include js plugin -->
<script src="{% static 'owl-carousel/js/owl.carousel.min.js' %}" type="text/javascript" charset="utf-8"></script>

{% compress js inline %}
<script type="text/javascript">
  $(document).ready(function() {
    $(".owl-carousel").owlCarousel({
      singleItem: true,
      itemsScaleUp: false,
      slideSpeed: 1000,
      paginationSpeed: 1500,
      rewindSpeed: 1000,
      autoPlay: true,
      stopOnHover: true,      
      navigation: false,
      scrollPerPage: false,      
      responsiveBaseWidth: '#content',      
      lazyLoad: true,      
      autoHeight: false,
    });
  });
</script>
{% endcompress %}

{% endcache %}

{% endblock %}