{% extends 'base.html' %}

{% load static from staticfiles %}
{% load bootstrap3 %}
{% load compress %}
{% load cache %}

{% block pagedescription %}Browse the finest quality IVF Laboratory Equipment{% endblock %}
{% block title %}Products{% endblock %}

{% block head %}
<!-- Important Owl stylesheet -->
<link rel="stylesheet" href="{% static 'owl-carousel/css/owl.carousel.css' %}">

<!-- Default Theme -->
<link rel="stylesheet" href="{% static 'owl-carousel/css/owl.theme.css' %}">
{% endblock %}

{% block body %}

{% cache 3600 products-details-nav-and-info product.slug %}
<ol class="breadcrumb">
  <li><a href="{{ category.get_absolute_url }}">{{ category.short_name }}</a></li>
  <li class="active">{{ product.subcategory.name|safe }}</li>
</ol>

<div style="border-bottom: 2px solid {{ product.subcategory.color }};">
  <h2 class="text-center" style="color:{{ product.subcategory.color }};">{{ product.description|safe }}</h2>
  <h3 class="text-center"><strong>Product ID: {{ product.product_id }}</strong></h3>

  {% if product.size or product.weight %}
  <p class="text-center"> 
    {% if product.size %}Dimensions/Size: {{ product.size }}{% endif %}
    {% if product.size and product.weight %} - {% endif %}
    {% if product.weight %}Weight: {{ product.weight }}{% endif %}
  </p>
  {% endif %}
  
  <p class="text-center">
    {% with prefix="Tariff No. / HS Code: " %}
    {% if product.hs_code %}
    {{prefix}}{{ product.hs_code }}
    {% elif product.subcategory.hs_code %}
    {{prefix}}{{ product.subcategory.hs_code }}
    {% elif product.category.hs_code %}
    {{prefix}}{{ product.category.hs_code }}
    {% endif %}
    {% endwith %}
  </p>  

  {% endcache %}

  {% if user.is_anonymous %}
  <p class="text-muted text-center">Add to Cart <span class="glyphicon glyphicon-shopping-cart"></span><br> (Login required)</p>
  {% else %}
  <p class="text-center">
    <button id="add_btn" class="btn add-to-cart-btn btn-lg" style="color: {{ product.subcategory.color }};">Add to Cart <span class="glyphicon glyphicon-shopping-cart"></span></button>
  </p>
  {% endif %}
</div>

{% cache 3600 products-details-images product.slug %}
<span class="minor-skip"></span>

<div class="row">  
  
  <div class="col-md-6" style="padding-top:12.5%";>
    {% if images|length > 1 %}
    <div class="owl-carousel">
      {% for image in images %}
      <div>
        <img class="img-responsive img-rounded center-block lazyOwl" data-src="{{ image.get_absolute_url }}" src="{{ image.get_absolute_url }}" alt="{{ image.image_title }}">
      </div>
      {% endfor %}
    </div>
    {% elif images|length > 0 %}
    {% with image=images|first %}
    <img class="img-responsive img-rounded center-block max-height-600" src="{{ image.get_absolute_url }}" alt="{{ image.image_title }}">
    {% endwith %}
    {% else %}
    <div class="alert alert-warning"><span class="glyphicon glyphicon-exclamation-sign"></span> No pictures available</div>
    {% endif %}    
  </div>
   
  
  <div id="{{ product.slug }}-prod-subcat-lt" class="col-md-6">
      {{ long_text|safe }}
  </div>  
  
  
</div>

{% endcache %} 


{% endblock %}

{% block endbody %}

{% cache 3600 products-details-scripts %}
<!-- Include js plugin -->
<script src="{% static 'owl-carousel/js/owl.carousel.min.js' %}" type="text/javascript" charset="utf-8"></script>

{% compress js inline %}
<script type="text/javascript">
  $(document).ready(function() {
    $(".owl-carousel").owlCarousel({
      singleItem: true,
      itemsScaleUp: false,
      slideSpeed: 1000,
      paginationSpeed: 1500,
      rewindSpeed: 1000,
      autoPlay: true,
      stopOnHover: true,      
      navigation: false,
      scrollPerPage: false,      
      responsiveBaseWidth: '#content',      
      lazyLoad: true,      
      autoHeight: false,
    });
    
    $("#add_btn").click(function() {
      addToCart({{ product.pk }});
    });       
  });  
</script>
{% endcompress %}

{% endcache %}

{% endblock %}